# ============================================================================
# OpenFatture Configuration Example
# ============================================================================
# Copy this file to .env and fill in your details
#
# REQUIRED fields (marked with *):
#   - CEDENTE_* (your company data)
#   - PEC_* (for SDI submission)
#   - NOTIFICATION_EMAIL (for email features)
#
# OPTIONAL fields:
#   - Digital signature, AI, Email branding, Custom paths
#
# See docs/CONFIGURATION.md for detailed documentation
# ============================================================================

# =====================
# Database
# =====================
DATABASE_URL=sqlite:///./openfatture.db

# For PostgreSQL (production):
# DATABASE_URL=postgresql://user:password@localhost:5432/openfatture

# =====================
# Your Company Data (Cedente Prestatore)
# =====================
CEDENTE_DENOMINAZIONE="Your Company Name"
CEDENTE_PARTITA_IVA=12345678901
CEDENTE_CODICE_FISCALE=RSSMRA80A01H501U
CEDENTE_REGIME_FISCALE=RF19  # RF19 = Regime forfettario
CEDENTE_INDIRIZZO="Via Roma 1"
CEDENTE_CAP=00100
CEDENTE_COMUNE=Roma
CEDENTE_PROVINCIA=RM
CEDENTE_NAZIONE=IT
CEDENTE_TELEFONO="+39 06 1234567"
CEDENTE_EMAIL=info@yourcompany.it

# =====================
# PEC Configuration (REQUIRED*)
# =====================
# Your PEC email address and password
PEC_ADDRESS=yourcompany@pec.it
PEC_PASSWORD=your_pec_password

# SMTP server configuration (depends on your PEC provider)
# Common providers:
#   - Aruba: smtp.pec.aruba.it:465
#   - Register: smtps.pec.register.it:465
#   - Legalmail: smtp.legalmail.it:465
#   - PosteCert: smtp.postecert.it:465
PEC_SMTP_SERVER=smtp.pec.aruba.it
PEC_SMTP_PORT=465

# SDI PEC address (usually doesn't change)
SDI_PEC_ADDRESS=sdi01@pec.fatturapa.it

# =====================
# Digital Signature (Optional)
# =====================
SIGNATURE_CERTIFICATE_PATH=/path/to/certificate.p12
SIGNATURE_CERTIFICATE_PASSWORD=cert_password

# =====================
# Email Templates & Notifications
# =====================
# Logo for email headers (optional - adds professional branding)
EMAIL_LOGO_URL=https://yourcompany.com/logo.png

# Brand colors for email templates (hex format)
EMAIL_PRIMARY_COLOR=#1976D2
EMAIL_SECONDARY_COLOR=#424242

# Custom footer text (optional - defaults to company info)
EMAIL_FOOTER_TEXT=Â© 2025 Your Company - P.IVA 12345678901

# Email address for automatic notifications (REQUIRED for email features)
# Receives: SDI notifications, batch summaries, system alerts
NOTIFICATION_EMAIL=admin@yourcompany.it

# Enable/disable automatic email notifications
NOTIFICATION_ENABLED=true

# Locale for emails and UI (it = Italian, en = English)
LOCALE=it

# =====================
# AI Configuration
# =====================
# Provider: openai, anthropic, or ollama (for local models)
AI_PROVIDER=anthropic
AI_MODEL=claude-3-5-sonnet-20241022
AI_API_KEY=sk-ant-your-api-key-here

# For OpenAI:
# AI_PROVIDER=openai
# AI_MODEL=gpt-4o
# AI_API_KEY=sk-your-openai-key-here

# For local models with Ollama (FREE):
# AI_PROVIDER=ollama
# AI_MODEL=llama3.2
# AI_BASE_URL=http://localhost:11434

# Generation parameters
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=2000

# =====================
# AI Chat Assistant (Interactive Mode)
# =====================
# Enable AI chat features in interactive mode
AI_CHAT_ENABLED=true

# Chat session persistence
AI_CHAT_SESSIONS_DIR=~/.openfatture/ai/sessions

# Auto-save conversations
AI_CHAT_AUTO_SAVE=true

# Maximum messages per session (for context management)
AI_CHAT_MAX_MESSAGES=100

# Maximum tokens per session
AI_CHAT_MAX_TOKENS=8000

# =====================
# AI Tools & Function Calling
# =====================
# Enable function calling for AI agents
AI_TOOLS_ENABLED=true

# Tools to enable (comma-separated)
# Available: search_invoices, get_invoice_details, get_invoice_stats,
#            search_clients, get_client_details, get_client_stats
AI_ENABLED_TOOLS=search_invoices,get_invoice_details,get_invoice_stats,search_clients,get_client_details,get_client_stats

# Require confirmation for destructive tools
AI_TOOLS_REQUIRE_CONFIRMATION=true

# =====================
# AI RAG (Retrieval-Augmented Generation)
# =====================
# RAG enhances AI responses with relevant invoices and knowledge base documents
# Enable/disable RAG system
OPENFATTURE_RAG_ENABLED=true

# ChromaDB storage directory
OPENFATTURE_RAG_PERSIST_DIR=.chroma

# Collection names
OPENFATTURE_RAG_COLLECTION=openfatture
OPENFATTURE_RAG_KB_COLLECTION=openfatture_kb

# Knowledge base manifest (contains legal/tax references)
OPENFATTURE_RAG_KB_MANIFEST=openfatture/ai/rag/sources.json

# --- Embedding Provider ---
# Choose: "openai" (requires API key) or "sentence-transformers" (local, free)
#
# RECOMMENDED FOR LOCAL SETUP (Ollama users):
#   Use sentence-transformers to avoid needing OpenAI API key
OPENFATTURE_RAG_EMBEDDING_PROVIDER=sentence-transformers

# For sentence-transformers (local embeddings - no API key needed):
OPENFATTURE_RAG_EMBEDDING_MODEL=all-MiniLM-L6-v2
# Other options: all-mpnet-base-v2, paraphrase-multilingual-MiniLM-L12-v2

# For OpenAI embeddings (requires OPENAI_API_KEY set):
# OPENFATTURE_RAG_EMBEDDING_PROVIDER=openai
# OPENFATTURE_RAG_EMBEDDING_MODEL=text-embedding-3-small
# OPENAI_API_KEY=sk-your-openai-key-here

# --- Retrieval Settings ---
# Number of relevant documents to retrieve
OPENFATTURE_RAG_TOP_K=5

# Minimum similarity score (0.0-1.0, higher = more strict)
OPENFATTURE_RAG_SIMILARITY_THRESHOLD=0.7

# Enable embedding caching for performance
OPENFATTURE_RAG_ENABLE_CACHING=true

# =====================
# Paths (Optional - defaults to ~/.openfatture/)
# =====================
# DATA_DIR=/custom/path/to/data
# ARCHIVIO_DIR=/custom/path/to/archivio
# CERTIFICATES_DIR=/custom/path/to/certificates
