# Invoice Compliance Quick Check
# Usage: /compliance-check "Invoice Number"
# Example: /compliance-check 2025-042

name: compliance-check
description: Verifica rapida compliance fattura prima dell'invio a SDI
category: compliance
aliases: [cc, check, verifica]
author: OpenFatture Team
version: "1.0"

template: |
  Esegui un controllo di compliance completo sulla fattura {{ arg1 }}:

  **ğŸ” COMPLIANCE CHECK - FATTURA {{ arg1 | upper }}**

  Verifica i seguenti aspetti (livello: ADVANCED):

  ## 1. Validazione Formale
  - âœ“ Dati cedente completi e corretti
  - âœ“ Dati cessionario completi e corretti
  - âœ“ Numero fattura valido e progressivo
  - âœ“ Data emissione valida
  - âœ“ Codice destinatario / PEC presente

  ## 2. Righe Fattura
  - âœ“ Descrizioni dettagliate (min 20 caratteri)
  - âœ“ QuantitÃ  e unitÃ  di misura
  - âœ“ Prezzi unitari corretti
  - âœ“ Totali calcolati correttamente

  ## 3. Trattamento Fiscale
  - âœ“ Aliquote IVA corrette
  - âœ“ Codici natura IVA appropriati
  - âœ“ Reverse charge applicato correttamente
  - âœ“ Split payment se necessario
  - âœ“ Ritenuta d'acconto se applicabile
  - âœ“ Bollo virtuale se richiesto

  ## 4. Compliance SDI
  - âœ“ XML valido secondo schema FatturaPA v1.9
  - âœ“ Codici ATECO validi
  - âœ“ CIG/CUP per PA (se richiesti)
  - âœ“ Pattern noti di rigetto SDI

  ## 5. Best Practices
  - âœ“ Descrizioni professionali
  - âœ“ Riferimenti normativi corretti
  - âœ“ Note fattura appropriate

  Per ogni problema rilevato:
  - Indica il livello di gravitÃ  (ERROR/WARNING/INFO)
  - Spiega il problema
  - Fornisci la soluzione suggerita
  - Cita il riferimento normativo

  **Risultato finale:**
  - âœ… READY per invio SDI
  - âš ï¸ Richiede correzioni (specificare quali)
  - âŒ NON CONFORME (bloccare l'invio)

  Stima la probabilitÃ  di accettazione da parte di SDI (0-100%).

examples:
  - "/compliance-check \"2025-042\""
  - "/cc 123"
  - "/verifica \"FAT-2025-10-001\""
