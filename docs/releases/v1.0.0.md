# OpenFatture v1.0.0 – Note di Rilascio

Prima versione ufficiale e supportata di OpenFatture. Consolidiamo tutte le funzionalità introdotte durante le fasi 1-5, con focus sulla riconciliazione pagamenti, sull’esperienza CLI e sulla maturità dell’assistente AI.

## Panoramica
- **Data di rilascio:** 10 ottobre 2025
- **Versione:** `1.0.0`
- **Obiettivi:** stabilità per liberi professionisti e piccoli studi, workflow end-to-end dalla fattura all’incasso, documentazione unificata.

## Novità principali
- **Riconciliazione bancaria avanzata**
  - Modulo `openfatture.payment` completo con import CSV/OFX/QIF, deduplicazione e ledger delle allocazioni.
  - Motore di matching composito con punteggio di confidenza e revisione interattiva.
  - Reminder automatici multi-canale con strategie configurabili e template professionali.
- **Esperienza CLI & TUI**
  - Menu interattivo `openfatture --interactive` con dashboard, AI chat e shortcut rapidi.
  - Comandi dedicati per clienti, fatture, notifiche SDI, reportistica, pagamento e AI.
  - Generazione PDF (`openfatture fattura pdf`) con tre template e conformità PDF/A-3.
- **Automazione AI operativa**
  - Agenti disponibili: Chat Assistant, Invoice Assistant, Tax Advisor.
  - Funzioni CLI: `ai describe`, `ai suggest-vat`, strumenti RAG e knowledge base indicizzabile.
  - Insight sui pagamenti parziali tramite `PaymentInsightAgent` quando è configurato un provider LLM.
- **Qualità & Compliance**
  - 74 test dedicati al modulo pagamenti, copertura globale >85%.
  - Validazione FatturaPA v1.9 aggiornata al 2025, digital signature P7M/CAdES supportata.

## Migrazione da 0.1.0
1. **Aggiorna il codice**
   ```bash
   git fetch origin
   git checkout v1.0.0
   uv sync --all-extras
   ```
2. **Backup del database**
   ```bash
   cp openfatture.db backups/openfatture-$(date +%Y%m%d).db
   ```
3. **Allinea lo schema database**
   ```bash
   uv run python -c "from openfatture.storage.database.session import init_db; init_db()"
   ```
4. **Verifica la configurazione**
   - Aggiungi eventuali nuove variabili viste in `.env.example` (es. notifiche pagamenti, AI provider).
   - Controlla i template email aggiornati (`openfatture/utils/email/templates`).
5. **Rigenera la knowledge base (se usi l’AI)**
   ```bash
   uv run openfatture ai rag index
   ```

> ℹ️ Nessun cambio breaking sugli identificativi di database; il comando `init_db()` crea automaticamente le nuove tabelle per le allocazioni pagamento.

## Requisiti di sistema
- **Python:** 3.12 o superiore (testato su macOS, Linux, Windows).
- **Gestione pacchetti:** `uv` consigliato per performance e lockfile.
- **Database:** SQLite integrato; supporto PostgreSQL (consigliato per installazioni multi-utente).
- **Dipendenze opzionali:**
  - ReportLab 4.0+ per PDF (incluso in extras).
  - Providers LLM (OpenAI, Anthropic, Ollama) per funzionalità AI.

## Checklist post-installazione
1. `uv run openfatture --version` → deve stampare `OpenFatture v1.0.0`.
2. `uv run python -m pytest` → tutti i test devono risultare verdi.
3. `uv run openfatture init` → inizializza struttura dati e cartelle (salta se già configurato).
4. `uv run openfatture payment import samples/intesa.csv --dry-run` → valida il nuovo flusso di import.
5. `uv run openfatture ai describe "Consulenza DevOps"` → verifica integrazione AI (se configurata).

## Documentazione correlata
- **Indice documentazione:** [docs/README.md](../README.md)
- **Riconciliazione Pagamenti:** [docs/PAYMENT_TRACKING.md](../PAYMENT_TRACKING.md)
- **Guida CLI completa:** [docs/CLI_REFERENCE.md](../CLI_REFERENCE.md)
- **Configurazione:** [docs/CONFIGURATION.md](../CONFIGURATION.md)
- **Processo di rilascio tecnico:** [docs/DEVELOPMENT.md](../DEVELOPMENT.md#release-process)
- **Changelog esteso:** [CHANGELOG.md](../../CHANGELOG.md)

## Problemi noti e lavoro futuro
- `openfatture ai forecast` e `openfatture ai check` restano in beta con risposte placeholder.
- Integrazione web GUI e gateway di pagamento sono previsti nella roadmap Phase 6.
- L’estrazione automatica di causali bancarie in tempo reale (webhook) è pianificata per la v1.1.0.

Per segnalare bug o richieste di miglioramento apri una issue su GitHub o consulta la pagina Supporto nel README principale.
